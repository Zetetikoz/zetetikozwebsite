(function($){$.fn.retina=function(options){var settings={dataRetina:true,suffix:"",checkIfImageExists:false,customFileNameCallback:"",overridePixelRation:false};if(options){jQuery.extend(settings,options);}var retinaEnabled=false;if(settings.overridePixelRation||window.devicePixelRatio>=2){retinaEnabled=true;}return this.each(function(){var $this=$(this);$this.addClass('retina-off');if(!retinaEnabled){return false;}var newImageSrc='';if(settings.dataRetina&&$this.attr('data-retina')){newImageSrc=$this.attr('data-retina');}if(settings.suffix){if(!newImageSrc){newImageSrc=$this.attr('src');}}if(settings.suffix){var baseFileName=newImageSrc.replace(/.[^.]+$/,'');var baseFileExtension=newImageSrc.replace(/^.*\./,'');newImageSrc=baseFileName+settings.suffix+'.'+baseFileExtension;}if(settings.customFileNameCallback){newImageSrc=settings.customFileNameCallback($this);}if(settings.checkIfImageExists&&newImageSrc){$.ajax({url:newImageSrc,type:"HEAD",success:function(){$this.attr('src',newImageSrc);$this.removeClass('retina-off');$this.addClass('retina-on');}});}else if(newImageSrc){$this.attr('src',newImageSrc);$this.removeClass('retina-off');$this.addClass('retina-on');}});};}(jQuery));